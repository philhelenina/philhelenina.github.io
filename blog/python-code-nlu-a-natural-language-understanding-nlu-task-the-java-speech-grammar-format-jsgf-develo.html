<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Natural Language Understanding (NLU) Task: the Java Speech Grammar Format (JSGF) Development using Python - Cheonkam Jeong</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <article class="blog-post">
        <h1>A Natural Language Understanding (NLU) Task: the Java Speech Grammar Format (JSGF) Development using Python</h1>
        <p class="post-date">December 05, 2022</p>

        <p><span style="font-family: helvetica; font-size: medium;">A Natural Language Understanding (NLU) Task: the Java Speech Grammar Format (JSGF) Development using Python&nbsp;</span></p><p><span style="font-family: helvetica; font-size: medium;">Code:&nbsp;</span><span style="color: #0000ee; font-family: helvetica; font-size: medium;"><u><a href="https://github.com/ninackjeong/nlu-challenge">https://github.com/ninackjeong/nlu-challenge</a></u></span></p><p><span style="font-family: helvetica;">The following is a Context Free Grammar, written using JSGF</span></p><div class="snippet-clipboard-content notranslate position-relative overflow-auto" style="box-sizing: border-box; overflow: auto; position: relative;"><pre class="notranslate" style="border-radius: 6px; box-sizing: border-box; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-size: 13.6px; line-height: 1.45; margin-bottom: 16px; margin-top: 0px; overflow-wrap: normal; overflow: auto; padding: 16px;"><code style="border-radius: 6px; border: 0px; box-sizing: border-box; display: inline; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-size: 13.6px; line-height: inherit; margin: 0px; overflow-wrap: normal; overflow: visible; padding: 0px; word-break: normal;"> #JSGF V1.0 utf-8 en;
 grammar music_play;

 public &lt;music_play&gt; =
	[can you] (play | put on) (&lt;artist&gt; | &lt;song&gt;);

 &lt;artist&gt; =
	 the beatles |
	 radio head |
	 lady gaga |
	 pink floyd;

 &lt;song&gt; =
	 comfortably numb |
	 paranoid android |
	 let it be |
	 hey jude;
</code></pre><p dir="auto" style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;"><span style="font-family: helvetica;">This grammar creates utterances that express the desire or intent to play music. Then, they are used as training data for statistical models for intent recognition. This grammar can generate utterances using a custom parser as follows:</span></p><div class="snippet-clipboard-content notranslate position-relative overflow-auto" style="box-sizing: border-box; overflow: auto; position: relative;"><pre class="notranslate" style="border-radius: 6px; box-sizing: border-box; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-size: 13.6px; line-height: 1.45; margin-bottom: 16px; margin-top: 0px; overflow-wrap: normal; overflow: auto; padding: 16px;"><code style="border-radius: 6px; border: 0px; box-sizing: border-box; display: inline; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-size: 13.6px; line-height: inherit; margin: 0px; overflow-wrap: normal; overflow: visible; padding: 0px; word-break: normal;">[can you play]&lt;unk&gt; [the beatles]&lt;artist&gt;
[can you put on]&lt;unk&gt; [paranoid android]&lt;song&gt;
</code></pre><h2 dir="auto" style="border-bottom: 1px solid var(--color-border-muted); box-sizing: border-box; font-weight: var(--base-text-weight-semibold, 600); line-height: 1.25; margin-bottom: 16px; margin-top: 24px; padding-bottom: 0.3em;"><a aria-hidden="true" class="anchor" href="https://github.com/ninackjeong/nlu-challenge#task-1-extend-the-english-grammar" id="user-content-task-1-extend-the-english-grammar" style="box-sizing: border-box; float: left; line-height: 1; margin-left: -20px; padding-right: 4px; text-decoration-line: none;"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"></svg><span style="font-family: helvetica; font-size: medium;"><path d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z" fill-rule="evenodd"></path></span></a><span style="font-family: helvetica; font-size: medium;">Task 1: Extend the English Grammar</span></h2><p dir="auto" style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;"><span style="font-family: helvetica;">Extend the English JSGF development grammar ("jsgf_eng_basic_ruls.txt" under "eng") so that it can cover at least the following utterances.</span></p><div class="snippet-clipboard-content notranslate position-relative overflow-auto" style="box-sizing: border-box; overflow: auto; position: relative;"><pre class="notranslate" style="border-radius: 6px; box-sizing: border-box; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-size: 13.6px; line-height: 1.45; margin-bottom: 16px; margin-top: 0px; overflow-wrap: normal; overflow: auto; padding: 16px;"><code style="border-radius: 6px; border: 0px; box-sizing: border-box; display: inline; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-size: 13.6px; line-height: inherit; margin: 0px; overflow-wrap: normal; overflow: visible; padding: 0px; word-break: normal;">[i want to listen to]&lt;unk&gt; [jazz]&lt;genre&gt; [music]&lt;unk&gt;
[play me]&lt;unk&gt; [ummagumma]&lt;album&gt; [by]&lt;unk&gt; [pink floyd]&lt;artist&gt;
[put]&lt;unk&gt; [lady gaga]&lt;artist&gt; [on]&lt;unk&gt;
</code></pre><h2 dir="auto" style="border-bottom: 1px solid var(--color-border-muted); box-sizing: border-box; font-weight: var(--base-text-weight-semibold, 600); line-height: 1.25; margin-bottom: 16px; margin-top: 24px; padding-bottom: 0.3em;"><a aria-hidden="true" class="anchor" href="https://github.com/ninackjeong/nlu-challenge#task-2-localize-the-jsgf-grammar-in-your-language-korean-here" id="user-content-task-2-localize-the-jsgf-grammar-in-your-language-korean-here" style="box-sizing: border-box; float: left; line-height: 1; margin-left: -20px; padding-right: 4px; text-decoration-line: none;"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"></svg><span style="font-family: helvetica; font-size: medium;"><path d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z" fill-rule="evenodd"></path></span></a><span style="font-family: helvetica; font-size: medium;">Task 2: Localize the JSGF grammar in your language (Korean, here)</span></h2><p dir="auto" style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;"><span style="font-family: helvetica;">Localize the extended English grammar from the above task in Korean. Considerations</span></p><ol dir="auto" style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px; padding-left: 2em;"><li style="box-sizing: border-box;"><span style="font-family: helvetica;">Korean is a SOV language</span></li><li style="box-sizing: border-box; margin-top: 0.25em;"><span style="font-family: helvetica;">Korean utilizes case markers to mark case while English does syntactically</span></li></ol><h2 dir="auto" style="border-bottom: 1px solid var(--color-border-muted); box-sizing: border-box; font-weight: var(--base-text-weight-semibold, 600); line-height: 1.25; margin-bottom: 16px; margin-top: 24px; padding-bottom: 0.3em;"><a aria-hidden="true" class="anchor" href="https://github.com/ninackjeong/nlu-challenge#procedure" id="user-content-procedure" style="box-sizing: border-box; float: left; line-height: 1; margin-left: -20px; padding-right: 4px; text-decoration-line: none;"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"></svg><span style="font-family: helvetica; font-size: medium;"><path d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z" fill-rule="evenodd"></path></span></a><span style="font-family: helvetica; font-size: medium;">Procedure</span></h2><ol dir="auto" style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px; padding-left: 2em;"><li style="box-sizing: border-box;"><span style="font-family: helvetica;">Install pyjsgf to construct JSGF grammars, convert them into strings or files, and find grammar rules that match speech strings. Type the following in Terminal.</span></li></ol><div class="snippet-clipboard-content notranslate position-relative overflow-auto" style="box-sizing: border-box; overflow: auto; position: relative; text-align: left;"><pre class="notranslate" style="border-radius: 6px; box-sizing: border-box; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-size: 13.6px; line-height: 1.45; margin-bottom: 16px; margin-top: 0px; overflow-wrap: normal; overflow: auto; padding: 16px;"><code style="border-radius: 6px; border: 0px; box-sizing: border-box; display: inline; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-size: 13.6px; line-height: inherit; margin: 0px; overflow-wrap: normal; overflow: visible; padding: 0px; word-break: normal;">$ pip install pyjsgf
</code></pre></div></div></div></div><blockquote style="border: none; margin: 0px 0px 0px 40px; padding: 0px; text-align: left;"><div class="snippet-clipboard-content notranslate position-relative overflow-auto" style="box-sizing: border-box; overflow: auto; position: relative;"><div class="snippet-clipboard-content notranslate position-relative overflow-auto" style="box-sizing: border-box; overflow: auto; position: relative;"><div class="snippet-clipboard-content notranslate position-relative overflow-auto" style="box-sizing: border-box; overflow: auto; position: relative;"><div class="snippet-clipboard-content notranslate position-relative overflow-auto" style="box-sizing: border-box; overflow: auto; position: relative;"><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;"><span style="font-family: helvetica;">If you are installing for developing pyjsgf, clone or download the repository, move to the root directory, and run the following.</span></p></div></div></div></div></blockquote><div class="snippet-clipboard-content notranslate position-relative overflow-auto" style="box-sizing: border-box; overflow: auto; position: relative;"><div class="snippet-clipboard-content notranslate position-relative overflow-auto" style="box-sizing: border-box; overflow: auto; position: relative;"><div class="snippet-clipboard-content notranslate position-relative overflow-auto" style="box-sizing: border-box; overflow: auto; position: relative;"><div class="snippet-clipboard-content notranslate position-relative overflow-auto" style="box-sizing: border-box; overflow: auto; position: relative;"><div class="snippet-clipboard-content notranslate position-relative overflow-auto" style="box-sizing: border-box; overflow: auto; position: relative;"><pre class="notranslate" style="border-radius: 6px; box-sizing: border-box; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-size: 13.6px; line-height: 1.45; margin-bottom: 16px; margin-top: 0px; overflow-wrap: normal; overflow: auto; padding: 16px;"><code style="border-radius: 6px; border: 0px; box-sizing: border-box; display: inline; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-size: 13.6px; line-height: inherit; margin: 0px; overflow-wrap: normal; overflow: visible; padding: 0px; word-break: normal;">$ pip install -e .
</code></pre><ol dir="auto" start="2" style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px; padding-left: 2em;"><li style="box-sizing: border-box;"><p dir="auto" style="box-sizing: border-box; margin-bottom: 16px; margin-top: 16px;"><span style="font-family: helvetica;">Prepare the example utterances in Korean "kor_test_utters.txt" under "kor": a Korean version of the English test utterances, translated by me</span></p></li><li style="box-sizing: border-box; margin-top: 0.25em;"><p dir="auto" style="box-sizing: border-box; margin-bottom: 16px; margin-top: 16px;"><span style="font-family: helvetica;">Write Korean grammar, and test it "jsgf_kor_extended_rules.txt" under "kor": Korean grammar (Note: I did not split case markers and particles from words) "test_kor_grammar.ipynb" under "kor": A script to check whether the test utterances are covered by the grammar</span></p></li><li style="box-sizing: border-box; margin-top: 0.25em;"><p dir="auto" style="box-sizing: border-box; margin-bottom: 16px; margin-top: 16px;"><span style="font-family: helvetica;">Generate Korean utterances, which include at least test utterances "jsgf_kor_extended_rules_generated_utterance.txt": Utterances generated by the Korean rules using "kor_utters_generator.ipynb"</span></p></li></ol><h2 dir="auto" style="border-bottom: 1px solid var(--color-border-muted); box-sizing: border-box; font-weight: var(--base-text-weight-semibold, 600); line-height: 1.25; margin-bottom: 16px; margin-top: 24px; padding-bottom: 0.3em;"><a aria-hidden="true" class="anchor" href="https://github.com/ninackjeong/nlu-challenge#think-about-the-following" id="user-content-think-about-the-following" style="box-sizing: border-box; float: left; line-height: 1; margin-left: -20px; padding-right: 4px; text-decoration-line: none;"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"></svg><span style="font-family: helvetica; font-size: medium;"><path d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z" fill-rule="evenodd"></path></span></a><span style="font-family: helvetica; font-size: medium;">Think about the following:</span></h2><div><span style="color: red; font-family: helvetica; font-size: medium;">Caveat: The followings are just my own opinions</span></div><h2 dir="auto" style="border-bottom: 1px solid var(--color-border-muted); box-sizing: border-box; font-weight: var(--base-text-weight-semibold, 600); line-height: 1.25; margin-bottom: 16px; margin-top: 24px; padding-bottom: 0.3em;"><span style="font-family: helvetica; font-size: small;">Any possible issue, if you were asked to extend the grammar considerably? Can you think about how to overcome it?</span></h2></div></div></div></div></div><div class="snippet-clipboard-content notranslate position-relative overflow-auto" style="box-sizing: border-box; overflow: auto; position: relative;"><div class="snippet-clipboard-content notranslate position-relative overflow-auto" style="box-sizing: border-box; overflow: auto; position: relative;"><div class="snippet-clipboard-content notranslate position-relative overflow-auto" style="box-sizing: border-box; overflow: auto; position: relative;"><div class="snippet-clipboard-content notranslate position-relative overflow-auto" style="box-sizing: border-box; overflow: auto; position: relative;"><div class="snippet-clipboard-content notranslate position-relative overflow-auto" style="box-sizing: border-box; overflow: auto; position: relative;"><ul style="text-align: left;"><li><span style="font-family: helvetica;">Issue 1: This bottom-up approach is labor-intensive and error prone with the possible danger of lowering the model accuracy (I am not talking about JSGF per se; I am talking about how I approached this problem - and possibly about the way the basic given rules are written - based on the given utterances).</span></li><li><span style="font-family: helvetica;">Solution to Issue 1: This may be mitigated by writing rules at a higher level. For instance, categorizing the utterances depending on their sentence type (e.g., imperatives) can be a way to mitigate such problems.</span></li><li><span style="font-family: helvetica;">Issue 2: This approach features weak semantic relation.</span></li><li><span style="font-family: helvetica;">Solution to Issue 2: A possible solution to this problem is to construct semantic rules as well. However, this solution may need duplicated work. Thus, another way of incorporating them, like a kind of dependency parsing at multiple levels or by adopting a constraint-based approach, is needed.</span></li><li><span style="font-family: helvetica;">Comments: The aforementioned problems can be more serious n morphologically rich languages, such as Korean. Specifically, Korean has a large number of particles, including case markers, but they are optional depending on context or situation. A topic pro-drop is in the same vein. In addition, honorific features of such languages as Korean and Japanese require modeling various conjugated forms and sentence types.</span></li></ul><span style="font-family: helvetica;">Which features of Korean complicate the localization? Can you think about how to work around these complications?</span></div><div class="snippet-clipboard-content notranslate position-relative overflow-auto" style="box-sizing: border-box; overflow: auto; position: relative;"><ul><li><span style="font-family: helvetica;">Issue 1:&nbsp;The major challenges were related to different grammatical rules between Ko</span><span style="font-family: helvetica;">rean and English. The major difference between them definitely lies in their different word order or headness.&nbsp;</span></li><li><span style="font-family: helvetica;">Solution to Issue 1:&nbsp;The order-related issues was not actually a major challenge as it was easily solved by switching positions in the higher rules.</span></li><li><span style="font-family: helvetica;">Issue 2:&nbsp;The major challenge was due to the fact that Korean is a morphologically rich language while syntax plays a pivotal role in English. Thus, Korean requires more various word forms to consider.&nbsp;</span></li><li><span style="font-family: helvetica;">Comments:&nbsp;All the aforementioned features of Korean are indeed challenging to model. However, a closer examination guided me to the conclusion that the major challenge or problem in the extended grammar might not be due to language specific features, but to the way the grammatical rules were written and/or work. To be specific, the extended grammar produced not just correct utterances but also semantically incorrect utterances. The erroneous utterances were due to the mismatch between the song or album and the artist. For instance, Ummagumma is a Pink Floyd's album, neither the Beatles' nor Lady Gaga's. However, these errors were also found in the corresponding English sentences, such as "i 'd like to hear ummagumma by radiohead." Thus, this mismatch (the major error) was not due to language specific features of Korean or English; rather this is possibly related to lack of firm semantic relations with respect to artists and songs, which may not be gracefully handled without humans' touch.&nbsp;</span></li></ul><div><span style="font-family: helvetica;">One last (linguistic) thought (also my opinion):&nbsp;Human languages are not context-free; rather, they are between context sensitive grammar and context free grammar in terms of Chomsky Hierarchy. Although language specific features of Korean make it difficult to build a model, the major challenge may be more related to how the computer parses human languages. Fortunately, human languages are similar in terms of deep structures. It may be impossible to build a perfect model, but if we abstractize models, parameterize language specific features, put some constraints with respect to semantic relations or incorporate semantic information, and build some processes to check both low and high-level grammars, a fancier (multilingual) model can be built.</span></div></div></div></div></div></div>

        <p class="post-meta">
            Categories: NLU, Python Code, NLP Code
        </p>

        <p class="post-meta">
            <small>Original post: <a href="https://cheonkamjeong.blogspot.com/2022/12/python-code-natural-language.html" target="_blank">https://cheonkamjeong.blogspot.com/2022/12/python-code-natural-language.html</a></small>
        </p>
    </article>

    <!-- Navigation -->
    <nav>
        <ul>
            <li><a href="../index.html">Home</a></li>
            <li><a href="../publications.html">Publications</a></li>
            <li><a href="../blog.html" class="active">Blog</a></li>
        </ul>
    </nav>

    <!-- Footer -->
    <footer>
        <p>&copy; 2025 Cheonkam Jeong. Last updated: October 2025.</p>
    </footer>
</body>
</html>
